---
title: VLANs
date: 2025-05-27 04:00:00 +0000
categories: [Networking_Topics]
tags: [vlans, ccna, ccnp, cisco, network_topics]
---

<h1 align="center">ğŸ”§ VLANs (Virtual LANs) - Complete Technical Notes</h1>

<h2 align="center"> ğŸ“Œ Overview</h2>

A **Virtual LAN (VLAN)** is a logical group of devices segmented at **Layer 2 (Data Link Layer)** of the OSI model. Unlike subnetting (Layer 3), VLANs enable multiple virtual broadcast domains on a single physical switch.


<h2 align="center">âœ… 1. Why VLANs? â€” The Problem They Solve</h2>


### ğŸ”¸ Without VLANs:

- All devices on a switch share **one broadcast domain**

- Flooded frames (broadcast, unknown unicast) reach **every port**

- Security concerns: Every host can talk to every other host

- Performance issues due to excessive broadcast traffic


### ğŸ”¸ Traditional Layer 3 Segmentation (Subnetting):

- Different departments = Different subnets (e.g., HR, Sales, Eng.)

- Requires a **router** to pass traffic between subnets

- But: **Switches donâ€™t recognize IP subnets**, so all ports still receive broadcast traffic


### ğŸ”¸ VLAN Solution:

- Segments Layer 2 broadcast domains logically

- Devices in **different VLANs cannot communicate** unless routed

- Reduces broadcast traffic & improves security

> ğŸ“˜ CCNA Rule of Thumb: One VLAN = One Subnet


<h2 align="center">ğŸ†” 2. VLAN ID Ranges</h2>


- **Total VLANs**: 4096 (IDs 0 to 4095 â€” 12-bit field in 802.1Q)

- **Usable VLANs**: 1â€“1001 (normal), 1006â€“4094 (extended)

- **Reserved VLANs**:

    - `0` and `4095`: Reserved, not usable

    - `1002â€“1005`: Legacy VLANs (FDDI, Token Ring)

- **Default VLAN**: VLAN 1 (cannot be deleted or renamed)


<h2 align="center">ğŸ”§ 3. VLAN Configuration on Switches</h2>


### ğŸ” 3.1 View VLANs

```bash
show vlan brief
```

Shows existing VLANs and port assignments.


### â• 3.2 Create and Name VLANs

```bash
conf t
vlan 10
 name HR
```

### âŒ Disable/Delete VLANs

```bash
vlan 10
 shutdown       # Disables VLAN
no vlan 10      # Deletes VLAN
```


<h2 align="center">ğŸ”— 3.3 Assign Access Ports to VLANs</h2>

Access ports = Untagged, belong to **one VLAN only**

```bash
interface fa0/1
 switchport mode access
 switchport access vlan 10
```

- If the VLAN doesnâ€™t exist, itâ€™s auto-created

- DTP (Dynamic Trunking Protocol): Tries to negotiate trunk/access mode. Disable for static configuration.

> **âš ï¸ Access ports = Used for end hosts (PCs, printers, etc.)**


<h2 align="center">ğŸŒ 4. Trunk Links â€” Connecting VLANs Across Switches</h2>

### ğŸ§µ 4.1 What is a Trunk Port?

- Carries traffic for multiple VLANs

- Adds a VLAN tag (802.1Q) to identify VLAN

### 4.2 Access vs Trunk Port

| **Access Port**            | **Trunk Port**                 |
|----------------------------|-------------------------------|
| One VLAN                   | Multiple VLANs                |
| Untagged                   | Tagged (802.1Q)               |
| End-host connections       | Switch-to-switch/Router       |


### ğŸ·ï¸ 4.3 802.1Q Tagging (Dot1Q)

- Tag = 4 bytes, inserted after Source MAC

- Fields:

    - TPID (0x8100): Identifies 802.1Q

    - PCP (3-bit): QoS Priority

    - DEI (1-bit): Drop Eligible

    - VID (12-bit): VLAN ID (0â€“4095)


>ğŸ“Œ Only 802.1Q is supported on modern Cisco switches
(ISL is deprecated: Cisco proprietary, adds 30 bytes)


### âš™ï¸ 4.4 Trunk Port Configuration

```bash
interface g0/1
 switchport trunk encapsulation dot1q     # Only if required
 switchport mode trunk
```


### ğŸ” Verify Trunks

```bash
show interfaces trunk
```

â— Trunk ports wonâ€™t show in `show vlan brief`


### âœ… 4.5 Allowing Specific VLANs on Trunks

By default, all VLANs (1â€“4094) are allowed. Best practice: **limit** to required VLANs.

```bash
switchport trunk allowed vlan 10,20
switchport trunk allowed vlan add 30
switchport trunk allowed vlan remove 20
```

ğŸ§  Exam Tip: Using `switchport trunk allowed vlan 20` (without `add`) will replace, not add.


### âš ï¸ 4.6 Native VLAN (Untagged Traffic)

- Frames in native VLAN are sent without a tag

- Default: VLAN 1

- Config:

```bash
interface g0/1
 switchport trunk native vlan 99
```

>âš ï¸ Mismatch = Misrouting risk  
> Avoid native VLANs for user traffic. Use unused VLANs instead.


<h2 align="center">ğŸ” 5. Inter-VLAN Routing</h2>

### ğŸ”§ Method 1: Router with Physical Interfaces

- Each VLAN/subnet connects to its own router interface

- Not scalable

### ğŸŒ‰ Method 2: Router-on-a-Stick (ROAS)

- **One physical port** on router used as trunk

- Create **subinterfaces** for each VLAN

### âš™ï¸ Switch:

```bash
interface g0/1
 switchport mode trunk
```

### âš™ï¸ Router:

```bash
interface g0/1.10
 encapsulation dot1q 10
 ip address 192.168.10.1 255.255.255.0
```

>ğŸ“ All subinterfaces share one MAC address     
Set native VLAN with `encapsulation dot1q 99 native` if needed


### ğŸ§  Method 3: Multilayer Switch (Layer 3 Switch)

- Use **Switch Virtual Interfaces (SVIs)**

**Configuration**:

```bash
ip routing                             # Enable routing
vlan 10
interface vlan 10
 ip address 192.168.10.1 255.255.255.0
 no shutdown
```

- SVI only works if:
    - VLAN exists

    - At least one port is up in the VLAN

    - VLAN is not shut

    - SVI is not shut

### â• Routed Ports (Optional)

```bash
interface g0/1
 no switchport
 ip address 192.168.100.1 255.255.255.0
```

<h2 align="center">ğŸ“¡ 6. VLAN Management and Advanced Features</h2>

### ğŸ“Š 6.1 VLAN MIB (RFC 2674)

Used for SNMP-based VLAN management

- Q-BRIDGE-MIB: Manages VLANs, memberships, port mappings

- Objects:

    - `dot1qVlan`: VLAN config/status
    - `dot1qTp`: Forwarding info
    - `dot1qStatic`: Static MAC/VLAN info


### ğŸ” 6.2 RADIUS Attributes for VLANs (RFC 4675)

- VLAN assignment per-user via RADIUS

- Attributes:

    - Egress-VLANID (56): Tagged/untagged VLAN

    - Ingress-Filters (57): Restrict incoming VLANs

    - Egress-VLAN-Name (58): Use VLAN name instead of ID

    - User-Priority-Table (59): Remap QoS priority

> âš ï¸ Misconfigured RADIUS policies can allow VLAN hopping or DoS    


<h2 align="center">ğŸ“ Summary for Interview or Revision</h2>


| **Concept**              | **Key Point**                                                                 |
|--------------------------|-------------------------------------------------------------------------------|
| VLAN Purpose             | Segments L2 broadcast domains                                                 |
| VLAN ID Range            | 1â€“1001, 1006â€“4094 usable                                                      |
| Access Port              | Belongs to 1 VLAN, untagged                                                   |
| Trunk Port               | Carries multiple VLANs, tagged (802.1Q)                                       |
| Native VLAN              | Untagged traffic assigned to it                                              |
| Inter-VLAN Routing       | ROAS (Router Subinterfaces), SVIs (Layer 3 Switch), Physical Interfaces       |
| `show vlan brief`        | See VLAN assignments                                                          |
| `show interfaces trunk`  | See trunk status/config                                                       |
| Best Practices           | Disable VLAN 1, limit allowed VLANs on trunk, avoid native VLAN mismatches    |


<h2 align="center">ğŸ“š Useful Commands (Cheat Sheet)</h2>

```bash
# Create VLAN
vlan 10
 name HR

# Assign Access Port
interface fa0/1
 switchport mode access
 switchport access vlan 10

# Set Trunk
interface g0/1
 switchport mode trunk
 switchport trunk encapsulation dot1q
 switchport trunk allowed vlan 10,20

# Native VLAN
switchport trunk native vlan 99

# Inter-VLAN Routing (Router)
interface g0/0.10
 encapsulation dot1q 10
 ip address 192.168.10.1 255.255.255.0

# Inter-VLAN Routing (Layer 3 Switch)
ip routing
interface vlan 10
 ip address 192.168.10.1 255.255.255.0
 no shutdown
```


## ğŸ™Œ Connect With Me

[![GitHub](https://img.shields.io/badge/GitHub-Profile-black?style=for-the-badge&logo=github)](https://github.com/Ntwork-Beginner)
[![LinkedIn](https://img.shields.io/badge/LinkedIn-Connect-blue?style=for-the-badge&logo=linkedin)](https://www.linkedin.com/in/ntworkbeginner/)
[![YouTube](https://img.shields.io/badge/YouTube-Subscribe-red?style=for-the-badge&logo=youtube)](https://www.youtube.com/@Ntwork_Beginner)
[![Gmail](https://img.shields.io/badge/Gmail-Mail-red?style=for-the-badge&logo=gmail)](mailto:your.bittudhillon011@gmail.com)
